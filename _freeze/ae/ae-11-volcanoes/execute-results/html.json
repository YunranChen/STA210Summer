{
  "hash": "e97001554ea3e54c0ee0f9694dc18283",
  "result": {
    "markdown": "---\ntitle: \"AE 11: Multinomial classification\"\n---\n\n\n::: callout-important\nGo to the [course GitHub organization](https://github.com/STA210-Summer22) and locate the repo titled `ae-11-volcanoes-YOUR_GITHUB_USERNAME` to get started.\n:::\n\n## Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(knitr)\nlibrary(colorblindr)\n```\n:::\n\n\n## Data\n\nFor this application exercise we will work with a dataset of on volcanoes. The data come from [The Smithsonian Institution](https://volcano.si.edu/) via [TidyTuesday](https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-05-12/readme.md).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvolcano <- read_csv(here::here(\"ae\", \"data/volcano.csv\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 958 Columns: 26\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (18): volcano_name, primary_volcano_type, last_eruption_year, country, r...\ndbl  (8): volcano_number, latitude, longitude, elevation, population_within_...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n:::\n\n\nFirst, a bit of data prep:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nvolcano <- volcano %>%\n  mutate(\n    volcano_type = case_when(\n      str_detect(primary_volcano_type, \"Stratovolcano\") ~ \"Stratovolcano\",\n      str_detect(primary_volcano_type, \"Shield\") ~ \"Shield\",\n      TRUE ~ \"Other\"\n    ),\n    volcano_type = fct_relevel(volcano_type, \"Stratovolcano\", \"Shield\", \"Other\")\n  ) %>%\n  select(\n    volcano_type, latitude, longitude, \n    elevation, tectonic_settings, major_rock_1\n    ) %>%\n  mutate(across(where(is.character), as_factor))\n```\n:::\n\n\n## Exploratory data analysis\n\n1.  Create a map of volcanoes that is faceted by `volcano_type`. First, we create a map here. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nworld <- map_data(\"world\")\n\nworld_map <- ggplot() +\n  geom_polygon(\n    data = world, \n    aes(\n      x = long, y = lat, group = group),\n      color = \"white\", fill = \"gray50\", \n      size = 0.05, alpha = 0.2\n    ) +\n  theme_minimal() +\n  coord_quickmap() +\n  labs(x = NULL, y = NULL)\nworld_map\n```\n\n::: {.cell-output-display}\n![](ae-11-volcanoes_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\nThen you need to add a layer to the map using `geom_point`, and reproduce the following plot.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](ae-11-volcanoes_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Build a new model\n\n2.  Build a new model that uses a recipe that includes geographic information (latitude and longitude). How does this model compare to the original one presented on slides? **Note:**\\\n    Use the same test/train split as well as same cross validation folds. Use seed 1234 for data splitting, and 9876 for cv.\n\n\n\nNew recipe, including geographic information:\n\n\n\nCombine the original model specification as the one on slides and new recipe to obtain new workflow:\n\n\n::: {.cell}\n\n:::\n\n\nFit resamples, and save it to `volcano\\_fit\\_rs2`\n\n\n::: {.cell}\n\n:::\n\n\nCollect metrics:\n\n\n::: {.cell}\n\n:::\n\n\nDraw ROC curves:\n\n\n::: {.cell}\n\n:::\n\n\nCompare these with the ones on slides. Comments on it. Which model do you prefer?\n\n## Acknowledgement\n\nThis exercise was inspired by [https://juliasilge.com/blog/multinomial-volcano-eruptions](https://juliasilge.com/blog/multinomial-volcano-eruptions/).\n",
    "supporting": [
      "ae-11-volcanoes_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": null
  }
}